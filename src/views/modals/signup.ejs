<!-- Sign up: Step 1/2 -->
<form
  class="needs-validation"
  action="signup"
  method="post"
  enctype="multipart/form-data"
  novalidate
>
  <div
    class="modal fade"
    id="signup-modal"
    aria-hidden="true"
    aria-labelledby="signup-modal"
    tabindex="-1"
    data-bs-backdrop="static"
  >
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content border border-light border-2">
        <div class="modal-header bg-light">
          <div class="logo">
            <img
              src="assets/logo/mooncloud_logo.png"
              alt="Logo"
              width="34"
              height="34"
              class="d-inline-block"
            />
            <strong class="text-dark">Mooncloud Messages</strong>
          </div>
          <button
            type="button"
            class="btn-close"
            data-bs-dismiss="modal"
            aria-label="Close"
          ></button>
        </div>
        <div class="modal-body text-center">
          <div class="current-step-1 text-light">
            <p class="mb-0 small">Step</p>
            <p class="mt-0 mb-2 small">1 / 2</p>
          </div>
          <div class="step-title">
            <h3>Sign up</h3>
            <p class="small">
              Enter your information below to create an account!
            </p>
            <div class="mx-2">
                <p class="m-0 text-warning">
                  <% if(user_exists.length > 0) { %> 
                  <% for( var i=0; i<user_exists.length; i++) { %>
                  <%= user_exists[i] %>
                  <% } %>
                  <% } %>
                </p>
            </div>
            <hr class="border border-light border-1" />
          </div>
          <div class="py-3">
            <div class="input-group mb-1">
              <span class="input-group-text"
                ><i class="fa-solid fa-envelope"></i
              ></span>
              <div class="form-floating">
                <input
                  type="email"
                  class="form-control"
                  placeholder="name@example.com"
                  name="email"
                  id="email"
                  autocomplete="email"
                  required
                />
                <label for="email">Email address</label>
                <span class="invalid-tooltip">
                  Please enter your email to signup
                </span>
              </div>
            </div>
            <div class="pb-2">
              <p id="email_error_msg" class="m-0 small text-warning"></p>
            </div>
            <div class="input-group mb-1">
              <span class="input-group-text"
                ><i class="fa-solid fa-key"></i
              ></span>
              <div class="form-floating">
                <input
                  type="password"
                  class="form-control"
                  placeholder="Password"
                  id="password"
                  name="password"
                  required
                />
                <label for="password">Password</label>
                <span class="invalid-tooltip">
                  Please enter your password
                </span>
              </div>
              <span class="input-group-text">
                <i id="show_password" class="fa-solid fa-eye"></i>
              </span>
              <span
                class="input-group-text"
                id="password_popover"
                data-bs-container="body"
                data-bs-toggle="popover"
                data-bs-placement="right"
                data-bs-content="Password must be at least 6 characters long, including one uppercase letter, number and a sign."
              >
                <i class="fa-regular fa-circle-question"></i
              ></span>
            </div>
            <div class="pb-2">
              <p id="password_error_msg" class="m-0 small text-warning"></p>
              <p id="password_success_msg" class="m-0 small text-success"></p>
            </div>
            <div class="input-group mb-1">
              <span class="input-group-text"
                ><i class="fa-solid fa-lock"></i
              ></span>
              <div class="form-floating">
                <input
                  type="password"
                  class="form-control"
                  placeholder="Repeat password"
                  id="confirm_password"
                  name="confirm_password"
                />
                <label for="confirm_password">Repeat Password</label>
                <span class="invalid-tooltip">
                  Please repeat your current password
                </span>
              </div>
            </div>
            <div class="pb-2">
              <p
                id="confirm_password_error_msg"
                class="m-0 small text-warning"
              ></p>
              <p
                id="confirm_password_success_msg"
                class="m-0 small text-success"
              ></p>
            </div>
          </div>
          <div class="d-flex flex-column">
            <button
              id="nextBtn"
              type="button"
              class="btn btn-lg btn-secondary"
              data-bs-target="#signup-next-step"
              data-bs-toggle="modal"
              disabled
            >
              Next
            </button>
          </div>
        </div>
        <div class="external-sign-up">
          <p>Sign up with:</p>
          <a class="btn btn-secondary" href="auth/signup/discord/redirect"><i class="fa-brands fa-discord"></i></a>
        </div>
        <hr class="border border-light border-1 m-0 mt-3" />
        <div class="modal-footer justify-content-center text-center">
          <p class="p-0 small text-light">
            Already have an account?
            <br />
            <a
              type="button"
              data-bs-target="#login-modal"
              data-bs-toggle="modal"
            >
              <u><strong>Login here</strong></u>
            </a>
          </p>
        </div>
      </div>
    </div>
  </div>
  <!-- Sign up: Step 2/2 -->
  <div
    class="modal fade"
    id="signup-next-step"
    aria-hidden="true"
    aria-labelledby="signup-next-step"
    tabindex="-1"
    data-bs-backdrop="static"
  >
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content border border-light border-2">
        <div class="modal-header bg-light">
          <div class="logo">
            <img
              src="assets/logo/mooncloud_logo.png"
              alt="Logo"
              width="34"
              height="34"
              class="d-inline-block"
            />
            <strong class="text-dark">Mooncloud Messages</strong>
          </div>
          <button
            type="button"
            class="btn-close"
            data-bs-dismiss="modal"
            aria-label="Close"
          ></button>
        </div>
        <div class="modal-body text-center">
          <div class="current-step-2 text-light">
            <p class="mb-0 small">Step</p>
            <p class="mt-0 mb-2 small">2 / 2</p>
          </div>
          <div class="card-body">
            <div class="user">
              <div class="step-title">
                <h3 class="m-0">Upload your avatar</h3>
                <p class="m-0 small">
                  (You can skip this step and upload your avatar later)
                </p>
              </div>
              <div
                class="profile d-flex flex-column align-items-center justify-content-center py-4"
              >
                <img
                  id="avatar_preview"
                  src="assets/users/default/default_user_avatar.jpg"
                  class="rounded rounded-circle"
                  alt="image-placeholder"
                />
                <input
                  type="file"
                  id="upload_user_avatar"
                  name="upload_user_avatar"
                  style="visibility: hidden"
                  class="m-0 p-0"
                />
                <label
                  for="upload_user_avatar"
                  class="btn btn-info upload-user-avatar-label"
                  >Choose avatar</label
                >
              </div>
              <div class="input-group mb-1">
                <span class="input-group-text"
                  ><i class="fa-solid fa-at"></i
                ></span>
                <div class="form-floating">
                  <input
                    type="text"
                    class="form-control"
                    placeholder="Username"
                    name="username"
                    id="username"
                    required
                  />
                  <label for="username">Username</label>
                </div>
              </div>
              <div class="pb-2">
                <p id="username_error_msg" class="m-0 small text-warning"></p>
                <p id="username_success_msg" class="m-0 small text-success"></p>
              </div>
            </div>
            <div class="d-flex flex-column pt-2">
              <button
                id="submit_finish_btn"
                type="submit"
                class="btn btn-lg btn-secondary mb-2"
                disabled
              >
                Finish
              </button>
              <button
                type="button"
                class="btn btn-lg btn-info"
                data-bs-target="#signup-modal"
                data-bs-toggle="modal"
              >
                Back
              </button>
            </div>
          </div>
        </div>
        <hr class="border border-light border-1 m-0 mt-3" />
        <div class="modal-footer justify-content-center text-center">
          <p class="p-0 small text-light">
            Already have an account?
            <br />
            <a
              type="button"
              data-bs-target="#login-modal"
              data-bs-toggle="modal"
            >
              <u><strong>Login here</strong></u>
            </a>
          </p>
        </div>
      </div>
    </div>
  </div>
</form>